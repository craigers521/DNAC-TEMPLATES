[
  {
    "name": "Public-Wifi-Template-J2",
    "description": "Public Wifi Template with Provider\nThis Template would need to be deployed every time a reprovisioning occurs and maintenance windows are required.",
    "tags": [
      {
        "id": "51c18b4d-e0c5-4b64-ad6a-93dc61d35159",
        "name": "DEMO"
      }
    ],
    "author": "admin",
    "deviceTypes": [
      {
        "productFamily": "Wireless Controller",
        "productSeries": "Cisco Catalyst 9800 Series Wireless Controllers"
      }
    ],
    "softwareType": "IOS",
    "softwareVariant": "XE",
    "templateContent": "{# Dictionarys and Macros -  can be maintained in separate template and included#}\n\n{% set AclPubWifiEntries = [\n  {'entry':'10','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'172.16.0.0','dmask':'0.15.255.255','op':'','ports':''},\n  {'entry':'20','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'10.0.0.0','dmask':'0.255.255.255','op':'','ports':''},\n  {'entry':'30','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'192.168.0.0','dmask':'0.0.255.255','op':'','ports':''},\n  {'entry':'40','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'100.64.0.0','dmask':'0.63.255.255','op':'','ports':''},\n  {'entry':'50','rule':'permit','protocol':'tcp','srange':'0.0.0.0','smask':'255.255.255.255','drange':'185.109.153.35','dmask':'0.0.0.0','op':'eq','ports':'443 www'},\n  {'entry':'60','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'185.109.153.35','dmask':'0.0.0.0','op':'','ports':''},\n  {'entry':'70','rule':'permit','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'0.0.0.0','dmask':'255.255.255.255','op':'','ports':''}\n  ]%}\n\n\n{% set PublicWifiParameters = [\n   {\"PubWifiName\":\"wpsp\",\"SSIDName\":\"dbs4public\",\"TunnelNum\":\"1\",\"TunnelSrc\":\"Vlan201\",\"TunnelDst\":\"10.48.218.33\",\"AAAIPv4\":\"\",\"CryptoType\":\"7\",\"CryptoKey\":\"TESTTESTTESTTESTTESTTEST\"}\n   ]%}\n\n{# Macro Section #}\n\n{# ACLs Standard Macro - Pragmatically Build Standard ACL from Object #}\n{% macro StandardAcl(name,lists) %}\n  ip access-list standard {{ name }}\n  {% for list in lists %}\n    {{ list['entry'] }} {{ list['rule'] }} {{ list['range'] }} {{ list['mask'] }}\n  {% endfor %}\n{% endmacro %}\n\n{# ACLs Extended Macro - Pragmatically Build Extended ACL from Object #}\n{% macro ExtendedAcl(name,lists) %}\n  ip access-list extended {{ name }}\n  {% for list in lists %}\n    {{ list.entry }} {{ list.rule }} {{ list.protocol }} {{ list.srange }} {{ list.smask }} {{ list.drange }} {{ list.dmask }} {{ list.op }} {{ list.ports }}\n  {% endfor %}\n{% endmacro %}\n\n{# Build of Public Wifi SSID tied into 3rd party with GRE #}\n{% macro PublicWifi(Parameter) %}\n{% for item in Parameter %}\n\n{# Build Tunnel Interface #}\ninterface Tunnel {{ item.TunnelNum }}\n no ip address\n tunnel source {{ item.TunnelSrc }} \n tunnel mode ethernet gre ipv4 p2p\n tunnel destination {{ item.TunnelDst }} \n\n{# Build AAA Profile #}\nradius server {{ item.PubWifiName }}-radius\n address ipv4 {{ item.AaaIPv4 }} auth-port 1812 acct-port 1813 \n key {{ item.CryptoType }} {{ item.CryptoKey }}\n\n{# Build ACL's #}\n{% set IPv4AclName = item.SSIDName + \"-4\" %}\n{% set IPv6AclName = item.SSIDName + \"-6\" %}\n{{ ExtendedAcl(IPv4AclName,AclPubWifiEntries) }}\n\nipv6 access-list {{ IPv6AclName }}-v6\n sequence 10 deny ipv6 any any\n\n{# Build Wireless Profile DHCP options #}\nwireless profile tunnel {{ item.PubWifiName }}-tp\n dhcp-opt82 ascii\n dhcp-opt82 circuit-id ap-mac,ap-ethmac,ssid-type\n dhcp-opt82 delimiter ;\n dhcp-opt82 enable\n dhcp-opt82 format mac colon-delimited\n dhcp-opt82 remote-id client-mac\n rule 1 realm-filter * domain {{ item.PubWifiName }}-wag vlan 1\n no shutdown\n\n{# Build Wireless Policy #}\n{#{% for profile in __policyprofile %}#}\n{#{% if SSIDName in profile %}#}\nwireless profile policy {{ item.SSIDName }}-{{ item.PubWifiName }}-pp\n accounting-list {{ item.PubWifiName }}-acc\n description {{ item.SSIDName }} {{ item.PubWifiName }} profile\n no exclusionlist\n idle-timeout 960\n ipv4 acl {{ IPv4AclName }}\n ipv4 dhcp required\n ipv6 acl {{ IPv6AclName }} \n session-timeout 10800\n tunnel-profile {{ item.PubWifiName }}-tp\n vlan db-net-iat-wlc-contr\n no shutdown\n{#{% endif %}#}\n{#{% endfor %}#}\n\n{# Build EoGRE Tunnel #}\ntunnel eogre domain {{ item.PubWifiName }}-wag\n primary Tunnel{{ item.TunnelNum }}\n no shutdown\ntunnel eogre source {{ item.TunnelSrc }}\n\n{# Build Wireless SSID #}\nwlan {{ item.SSIDName }} 110 {{ item.SSIDName }}\n assisted-roaming dual-list\n assisted-roaming prediction\n band-select\n bss-transition dual-list\n peer-blocking drop\n radio dot11ag\n no security wpa\n no security wpa wpa2\n no security wpa wpa2 ciphers aes\n no security wpa akm dot1x\n security dot1x authentication-list wpsp-auth\n no shutdown\n\n{% endfor %}\n{% endmacro %}\n\n\n{# To Use include this file in flow #}\n{{ PublicWifi(PublicWifiParameters) }}\n",
    "rollbackTemplateContent": "",
    "templateParams": [],
    "rollbackTemplateParams": [],
    "composite": false,
    "containingTemplates": [],
    "language": "JINJA",
    "promotedTemplateContent": "{# Dictionarys and Macros -  can be maintained in separate template and included#}\n\n{% set AclPubWifiEntries = [\n  {'entry':'10','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'172.16.0.0','dmask':'0.15.255.255','op':'','ports':''},\n  {'entry':'20','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'10.0.0.0','dmask':'0.255.255.255','op':'','ports':''},\n  {'entry':'30','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'192.168.0.0','dmask':'0.0.255.255','op':'','ports':''},\n  {'entry':'40','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'100.64.0.0','dmask':'0.63.255.255','op':'','ports':''},\n  {'entry':'50','rule':'permit','protocol':'tcp','srange':'0.0.0.0','smask':'255.255.255.255','drange':'185.109.153.35','dmask':'0.0.0.0','op':'eq','ports':'443 www'},\n  {'entry':'60','rule':'deny','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'185.109.153.35','dmask':'0.0.0.0','op':'','ports':''},\n  {'entry':'70','rule':'permit','protocol':'ip','srange':'0.0.0.0','smask':'255.255.255.255','drange':'0.0.0.0','dmask':'255.255.255.255','op':'','ports':''}\n  ]%}\n\n\n{% set PublicWifiParameters = [\n   {\"PubWifiName\":\"wpsp\",\"SSIDName\":\"dbs4public\",\"TunnelNum\":\"1\",\"TunnelSrc\":\"Vlan201\",\"TunnelDst\":\"10.48.218.33\",\"AAAIPv4\":\"\",\"CryptoType\":\"7\",\"CryptoKey\":\"TESTTESTTESTTESTTESTTEST\"}\n   ]%}\n\n{# Macro Section #}\n\n{# ACLs Standard Macro - Pragmatically Build Standard ACL from Object #}\n{% macro StandardAcl(name,lists) %}\n  ip access-list standard {{ name }}\n  {% for list in lists %}\n    {{ list['entry'] }} {{ list['rule'] }} {{ list['range'] }} {{ list['mask'] }}\n  {% endfor %}\n{% endmacro %}\n\n{# ACLs Extended Macro - Pragmatically Build Extended ACL from Object #}\n{% macro ExtendedAcl(name,lists) %}\n  ip access-list extended {{ name }}\n  {% for list in lists %}\n    {{ list.entry }} {{ list.rule }} {{ list.protocol }} {{ list.srange }} {{ list.smask }} {{ list.drange }} {{ list.dmask }} {{ list.op }} {{ list.ports }}\n  {% endfor %}\n{% endmacro %}\n\n{# Build of Public Wifi SSID tied into 3rd party with GRE #}\n{% macro PublicWifi(Parameter) %}\n{% for item in Parameter %}\n\n{# Build Tunnel Interface #}\ninterface Tunnel {{ item.TunnelNum }}\n no ip address\n tunnel source {{ item.TunnelSrc }} \n tunnel mode ethernet gre ipv4 p2p\n tunnel destination {{ item.TunnelDst }} \n\n{# Build AAA Profile #}\nradius server {{ item.PubWifiName }}-radius\n address ipv4 {{ item.AaaIPv4 }} auth-port 1812 acct-port 1813 \n key {{ item.CryptoType }} {{ item.CryptoKey }}\n\n{# Build ACL's #}\n{% set IPv4AclName = item.SSIDName + \"-4\" %}\n{% set IPv6AclName = item.SSIDName + \"-6\" %}\n{{ ExtendedAcl(IPv4AclName,AclPubWifiEntries) }}\n\nipv6 access-list {{ IPv6AclName }}-v6\n sequence 10 deny ipv6 any any\n\n{# Build Wireless Profile DHCP options #}\nwireless profile tunnel {{ item.PubWifiName }}-tp\n dhcp-opt82 ascii\n dhcp-opt82 circuit-id ap-mac,ap-ethmac,ssid-type\n dhcp-opt82 delimiter ;\n dhcp-opt82 enable\n dhcp-opt82 format mac colon-delimited\n dhcp-opt82 remote-id client-mac\n rule 1 realm-filter * domain {{ item.PubWifiName }}-wag vlan 1\n no shutdown\n\n{# Build Wireless Policy #}\n{#{% for profile in __policyprofile %}#}\n{#{% if SSIDName in profile %}#}\nwireless profile policy {{ item.SSIDName }}-{{ item.PubWifiName }}-pp\n accounting-list {{ item.PubWifiName }}-acc\n description {{ item.SSIDName }} {{ item.PubWifiName }} profile\n no exclusionlist\n idle-timeout 960\n ipv4 acl {{ IPv4AclName }}\n ipv4 dhcp required\n ipv6 acl {{ IPv6AclName }} \n session-timeout 10800\n tunnel-profile {{ item.PubWifiName }}-tp\n vlan db-net-iat-wlc-contr\n no shutdown\n{#{% endif %}#}\n{#{% endfor %}#}\n\n{# Build EoGRE Tunnel #}\ntunnel eogre domain {{ item.PubWifiName }}-wag\n primary Tunnel{{ item.TunnelNum }}\n no shutdown\ntunnel eogre source {{ item.TunnelSrc }}\n\n{# Build Wireless SSID #}\nwlan {{ item.SSIDName }} 110 {{ item.SSIDName }}\n assisted-roaming dual-list\n assisted-roaming prediction\n band-select\n bss-transition dual-list\n peer-blocking drop\n radio dot11ag\n no security wpa\n no security wpa wpa2\n no security wpa wpa2 ciphers aes\n no security wpa akm dot1x\n security dot1x authentication-list wpsp-auth\n no shutdown\n\n{% endfor %}\n{% endmacro %}\n\n\n{# To Use include this file in flow #}\n{{ PublicWifi(PublicWifiParameters) }}\n",
    "promotedTemplateParams": [],
    "customParamsOrder": false,
    "createTime": 1698965291526,
    "lastUpdateTime": 1699023703226,
    "latestVersionTime": 1699023599474,
    "validationErrors": {
      "templateErrors": [],
      "rollbackTemplateErrors": [],
      "templateId": "6d39b8c2-c457-4d12-a3f4-c7bcca0aa394",
      "templateVersion": null
    },
    "noOfConflicts": 0,
    "documentDatabase": false,
    "projectAssociated": true
  }
]